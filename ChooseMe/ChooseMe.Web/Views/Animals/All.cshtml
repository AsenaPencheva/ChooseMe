@using ChooseMe.Common.Enums;
@model PagedList.PagedList<ChooseMe.Web.Models.Animal.AnimalsListView>
@{
    ViewBag.Title = "All Animals";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2 class="text-primary">Are you going to bring us home?</h2>
<br/>
<div class="row"  id="search-options">
    <span class="pull-left">
        @Html.EditorFor(m => m, "Search")
    </span>
    <span>
     @Html.DropDownListFor(
    model => model.FirstOrDefault().FurColor,
    Enum.GetNames(typeof(FurColor))
        .Select(e => new SelectListItem { Text = e }),
    "-- Select a pattern--",
    new { @class = "form-control", @id= "color-drop" })

        @Html.DropDownListFor(
    model => model.FirstOrDefault().Type,
    Enum.GetNames(typeof(AnimalType))
        .Select(e => new SelectListItem { Text = e }),
    "-- Dog or Cat --",
    new { @class = "form-control", @id = "specie-drop" })
    </span>
    <span class="pull-right">
        <strong>Sort by: </strong>
        @Html.ActionLink("Date", "All", new { sortOrder = ViewBag.DateSortParm, currentFilter = ViewBag.CurrentFilter, furColorFilter = ViewBag.CurrentFur, type = ViewBag.Type }, new { @class = "btn btn-danger loading" })
        @Html.ActionLink("Age", "All", new { sortOrder = ViewBag.AgeSortParm, currentFilter = ViewBag.CurrentFilter, furColorFilter = ViewBag.CurrentFur, type = ViewBag.Type }, new { @class = "btn btn-success loading" })
        @Html.ActionLink("Name", "All", new { sortOrder = ViewBag.NameSortParm, currentFilter = ViewBag.CurrentFilter, furColorFilter = ViewBag.CurrentFur, type = ViewBag.Type }, new { @class = "btn btn-warning loading" })
    </span>
</div>
<br/>
<br />
<div class="row">
    @Html.Partial("_AllTable")
    <div id="ajax-search-results"></div>
    @Html.Partial("_Paging")
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script>
    $('#color-drop').change(function () {
        if ($("#color-drop option:selected").text() === '-- Select a pattern--') {
            window.location.href = '/Animals/All';
        } else {
            window.location.href = '/Animals/All?furColorFilter=' + $("#color-drop option:selected").text();
        }
    });
    $('#specie-drop').change(function () {
        if ($("#specie-drop option:selected").text() === '-- Dog or Cat --') {
            window.location.href = '/Animals/All';
        } else {
            window.location.href = '/Animals/All?type=' + $("#specie-drop option:selected").text();
        }
    });
</script>